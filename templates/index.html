<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>EmoWarn</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="static/style.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
    <body>
        <label class="welcomeMSG">
            <span class="welcomeTitle">Welcome to <span class="emowarnColor">EmoWarn</span>!</span><br>
            <span class="welcomeDescription">
                EmoWarn is a project for detecting fake news with emotional warnings.<br>Please note that all outputs are for <strong>testing purposes only</strong> as we refine our detection algorithm.<br>
                Thank you for exploring EmoWarn!
            </span>
        </label>
        <header class="navBar">
                <img class="logo" src="static/images/rsz_emowarnlogo.png" alt="logo">
                <nav>
                    <ul class="navLinks">
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Guide</a></li>
                    </ul>
                </nav>
                <a class="cta" href="#"><button>Contact</button></a>
        </header>
        <div class="container">
            <section>
                <form action="{{ url_for('predict')}}" class="form" method="post">
                    <div class="input-box">
                        <label>News Headline</label>
                        <input type="text" name = "headline" placeholder="Enter news headline...">
                    </div>
                    <div class="input-box">
                        <label>News Article</label>
                        <textarea class="textarea" name = "article" placeholder="Enter news article..." rows="8"></textarea>
                    </div>
                    <button type="submit">Submit</button>
                </form>
            </section>
        </div>  
        <div class="formSectionContainer">
            <section class="formSection">
                <header>Fake News Detection</header>
                <form class="formWithDynamicLabel">
                    <header style="text-align: left;">News Headline and Article</header>
                    <div class="resultLabelContainer">
                        <label>Result:</label>
                        <label class="dynamicLabel">{{ cred_result }}</label>
                    </div>
                    <header class="graphHeader">Graphical Results</header>
                    <div class="pieChartContainer">
                        <canvas id="pieChart" width="400" height="400"></canvas>
                    </div>
                </form>
            </section>
            <section class="formSection">
                <header>Emotion Classification</header>
                <form class="formWithDynamicLabel">
                    <header style="text-align: left;">News Headline and Article</header>
                    <div class="resultLabelContainer">
                        <label>Result:</label>
                        <label class="dynamicLabel">{{ emo_result }}</label>
                    </div>
                    <header class="graphHeader">Graphical Results</header>
                    <div class="emotionChartContainer">
                        <canvas id="emotionChart"></canvas> 
                    </div>
                </form>
            </section>
        </div>
        <section class="recommendationSection">
            <h2>The Most Reliable Sources</h2>
            <ul class="recommendedLinks">
                <li>
                    <a href="https://www.inquirer.net/">
                        <img src="static/images/inquirer-thumbnail.jpg" alt="Philippine Daily Inquirer" class="linkThumbnail">
                        <span class="linkLabel">Philippine Daily Inquirer</span>
                    </a>
                </li>
                <li>
                    <a href="https://www.pna.gov.ph/">
                        <img src="static/images/pna-thumbnail.jpg" alt="Philippine News Agency" class="linkThumbnail">
                        <span class="linkLabel">Philippine News Agency</span>
                    </a>
                </li>
                <li>
                    <a href="https://www.sunstar.com.ph/">
                        <img src="static/images/sunstar-thumbnail.png" alt="SunStar Publishing" class="linkThumbnail">
                        <span class="linkLabel">SunStar Publishing, Inc.</span>
                    </a>
                </li>
                <li>
                    <a href="https://mb.com.ph/">
                        <img src="static/images/mb-thumbnail.jpg" alt="Manila Bulletin" class="linkThumbnail">
                        <span class="linkLabel">Manila Bulletin</span>
                    </a>
                </li>
            </ul>
        </section>
    </body>
    <script>
        // Initialize the Pie Chart
        window.onload = function() {
            const ctx = document.getElementById('pieChart').getContext('2d');
            const pieChart = new Chart(ctx, {
                type: 'pie',  // Pie chart type
                data: {
                    labels: ['Fake', 'Real'],  // Labels for segments
                    datasets: [{
                        data: [1, 99],  // Data values (e.g., 70% Real, 30% Fake)
                        backgroundColor: ['#F44336', '#4CAF50'],  // Color for each segment
                        borderColor: ['rgba(200, 154, 106, 0.8)', 'rgba(200, 154, 106, 0.8)'],  // Border color for each segment
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,  // Make the chart responsive
                    plugins: {
                        legend: {
                            position: 'top',  // Position the legend on top
                        },
                    },
                }
            });
        };

        // Emotion Classification Example (Second Chart)
        var ctx2 = document.getElementById('emotionChart').getContext('2d');
        var emotionChart = new Chart(ctx2, {
            type: 'pie',  // You can change this to a different chart type as needed
            data: {
                labels: ['Joy', 'Sadness', 'Anger', 'Fear', 'Surprise'],
                datasets: [{
                    label: 'Emotion Probabilities',
                    data: [3, 57, 3, 17, 21],
                    borderColor: '#F1E1C6',
                    backgroundColor: ['#FFC300', '#2310C5 ', '#C70039',  '#FF5800', 'FFDCF8'],  // Color for each segment
                }]
            },
            options: {
                responsive: true,
            }
        });
    </script>
</html>